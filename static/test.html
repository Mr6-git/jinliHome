<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <script>
        // var number = 5;
        // var obj = {
        //     number: 3,
        //     fn1: (function () {
        //         var number;
        //         this.number *= 2;
        //         number = number * 2;
        //         number = 3;
        //         return function () {
        //             var num = this.number;
        //             this.number *= 2;
        //             console.log(num);
        //             number *= 3;
        //             console.log(number);
        //         }
        //     })()
        // }
        // var fn1 = obj.fn1;
        // fn1.call(null);
        // obj.fn1();
        // console.log(window.number);

        function _new(func) {
            let target = {};
            target._proto_ = func.prototype;
            let res = func.call(target);
            if (res && typeof (res) == 'object' || typeof (res) == 'function') {
                return res;
            }
            return target;
        }

        // Function.prototype.call = function (context) {
        //     /** 如果第一个参数传入的是 null 或者是 undefined, 那么指向this指向 window/global */
        //     /** 如果第一个参数传入的不是null或者是undefined, 那么必须是一个对象 */
        //     if (!context) {
        //         //context为null或者是undefined
        //         context = typeof window === 'undefined' ? global : window;
        //     }
        //     console.log(this)
        //     context.fn = this; //this指向的是当前的函数(Function的实例)
        //     let rest = [...arguments].slice(1);//获取除了this指向对象以外的参数, 空数组slice后返回的仍然是空数组
        //     let result = context.fn(...rest); //隐式绑定,当前函数的this指向了context.
        //     delete context.fn;
        //     return result;
        // }

        // //测试代码
        // var foo = {
        //     name: 'Selina'
        // }
        // var name = 'Chirs';
        // function bar(job, age) {
        //     console.log(this.name);
        //     console.log(job, age);
        // }
        // bar.call(foo, 'programmer', 20);
        // // Selina programmer 20
        // bar.call(null, 'teacher', 25);
        // // 浏览器环境: Chirs teacher 25;

        function Fnn() {
            this.name = '六'
        }
        var a = new Fnn();
        console.log(a.__proto__.constructor === Fnn.prototype.constructor)
        console.log(Fnn.prototype.name)
        console.log(a.__proto__.name)
    </script>
</body>

</html>